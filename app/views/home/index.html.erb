<div class="row" id="rowButtons">
    <div class="col">
        <%= button_to "Reserve Book", make_reservation_path, remote: true, class:"btn btn-primary", "data-toggle" => "modal", "data-target" => "#modalMakeReserve"%>
    </div>
</div>

<table class="table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>SKU</th>
            <th>Stock</th>
            <th>Price</th>        
        <% if user_signed_in? %>
            <th colspan="3"></th>
        <% else %>
            <th colspan="2"></th>
        <% end %>
        </tr>
    </thead>

    <tbody id="leUserBooks">
        <%= render partial: "home/book", collection: @books %>
    </tbody>
</table>
<!--
<script>
function build_modalMakeReserve(){
  var modal = new DOMParser().parseFromString(`<div class="modal fade" id="modalMakeReserve" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalMakeReserveLabel">Make Reservation</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id="myForm">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>`, 'text/html');
  document.querySelector('body').prepend(modal.body.firstChild);
  /*document.getElementById('myForm').append("<%= j render(:partial =>'home/form', :locals => { :reservation => @reservation } ) %>");*/
  $('#myForm').html("<%= j render(:partial =>'home/form', :locals => { :reservation => @reservation } ) %>");
  
};

document.addEventListener('DOMContentLoaded', function(){
  document.getElementById('rowButtons').addEventListener('click', function (event) {
    if (event.target.dataset.target == "#modalMakeReserve"){
        console.log(event.target.dataset.target)
      $.ajax({
        url: '<%= make_reservation_path %>',
        type: 'GET',
        dataType: 'script',
        data: {}
      })

      build_modalMakeReserve();
      
    }
  })
})

</script>
-->